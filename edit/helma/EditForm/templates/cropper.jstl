<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
	<title><%= param.picture.name encoding='html' %></title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<script type="text/javascript" src="/static/base/js/bootstrap.js"></script>
	<script type="text/javascript" src="/static/edit/js/cropper.js"></script>
	<script>
		$window.addEvent('load', function() {
			var cropper = new Cropper(Hash.merge({
				resize: { width: true, height: true },
				cropperSize: $window.getSize(),
			}, <% json param.cropper %>));

			cropper.confirm = function(){
				var cropInfo = cropper.getCropInfo();
				var preset = cropper.getPreset();
				if ($window.setResult)
					$window.setResult(cropInfo, preset);
				$window.close();
			}
		});
	</script>
	<link href="/static/edit/css/cropper.css" media="screen" rel="Stylesheet" type="text/css">
</head>
<body>
	<div id="cropper">
		<div id="cropper-canvas">
			<table id="cropper-loader"><tr><td>Loading Image...</td></tr></table>
			<img src="<%= param.picture.getUri() %>" width=<%= param.picture.width %> height=<%= param.picture.height %> id="cropper-image">
	    </div>
		<div id="cropper-background">
			<div id="cropper-footer">
		 		<div id="cropper-slider">
					<div id="cropper-slider-handle"></div>
				</div>
				<div id="cropper-buttons">
					<input id="cropper-ok" name="commit" type="submit" value="OK">
					<input id="cropper-cancel" type="button" value="Cancel">
					<input id="cropper-reset" type="button" value="Reset">
				</div>
			</div>
		</div>
	</div>
</body>
</html>